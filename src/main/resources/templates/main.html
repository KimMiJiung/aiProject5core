<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Hyundai CRM - Main</title>
  <th:block th:replace="~{top}"></th:block>
  
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bxslider@4.2.17/dist/jquery.bxslider.min.css">
  <script src="https://cdn.jsdelivr.net/npm/bxslider@4.2.17/dist/jquery.bxslider.min.js"></script>
  <link th:href="@{/css/main.css}" rel="stylesheet">
</head>
<body>
  <div class="slider-wrap">
    <button class="bx-prev">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M9.224 1.553a.5.5 0 0 1 .223.67L6.56 8l2.888 5.776a.5.5 0 1 1-.894.448l-3-6a.5.5 0 0 1 0-.448l3-6a.5.5 0 0 1 .67-.223"/></svg>
    </button>
    <button class="bx-next">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M6.776 1.553a.5.5 0 0 1 .671.223l3 6a.5.5 0 0 1 0 .448l-3 6a.5.5 0 1 1-.894-.448L9.44 8 6.553 2.224a.5.5 0 0 1 .223-.671"/></svg>
    </button>

    <ul class="bxslider">
        <li class="car-slide">
            <a th:href="@{/vehicles/vehicle/detail/17}" class="slide-link">
                <div class="car-title">IONIQ 6 N</div>
                <div class="car-sub">Rule the Paradigm</div>
                <img th:src="@{/images/main_kv_ioniq6_n_pc.png}" class="car-img">
            </a>
        </li>			
        <li class="car-slide">
            <a th:href="@{/vehicles/vehicle/detail/3}" class="slide-link">	
                <div class="car-title">SONATA The Edge</div>
                <div class="car-sub">익숙함도 완전히 새롭게</div>
                <img th:src="@{/images/main_sonata_25my_w.png}" class="car-img">
            </a>
        </li>
        <li class="car-slide">
            <a th:href="@{/vehicles/vehicle/detail/16}" class="slide-link">	
                <div class="car-title">IONIQ 5 N</div>
                <div class="car-sub">Everyday N Life</div>
                <img th:src="@{/images/Main-KV_Car_IONIQ-5-N.png}" class="car-img">
            </a>
        </li>
        <li class="car-slide">
            <a th:href="@{/vehicles/vehicle/detail/9}" class="slide-link">	
                <div class="car-title">SANTA FE</div>
                <div class="car-sub">일상과 일상 사이를 열다</div>
                <img th:src="@{/images/main-santafe-25my-kv-w.png}" class="car-img">
            </a>
        </li>
        <li class="car-slide">
            <a th:href="@{/vehicles/vehicle/detail/7}" class="slide-link">	
                <div class="car-title">TUCSON</div>
                <div class="car-sub">날개를 달다</div>
                <img th:src="@{/images/Main-KV_Car_TUCSON.png}" class="car-img">
            </a>
        </li>
        <li class="car-slide">
            <a th:href="@{/vehicles/vehicle/detail/18}" class="slide-link">	
                <div class="car-title">2026 CASPER Electric</div>
                <div class="car-sub">아이코닉한 디자인의 완성</div>
                <img th:src="@{/images/Main-KV_Car_CASPER-Electric.png}" class="car-img">
            </a>
        </li>
    </ul>
  </div>

  <a sec:authorize="isAuthenticated() and not (hasRole('ADMIN') or hasRole('DEALER'))" 
     th:href="@{counseling}" 
     class="consult-icon" 
     aria-label="상담하기">
      <img th:src="@{/icons/speech-bubble.png}" alt="상담">
  </a>

  <th:block th:replace="~{bottom}"></th:block>

  <script>
    $(function() {
        var slider = $('.bxslider').bxSlider({
            pager: false,
            controls: false,
            mode: 'fade',
            speed: 800,
            pause: 6000,
            auto: true,
            touchEnabled: false, // 클릭 이벤트 간섭 방지
            onSlideBefore: function($slideElement) {
                // 슬라이드 전환 전 초기화
                $slideElement.find('.car-title, .car-sub').css({opacity: 0, transform: 'translateY(30px)', transition: 'none'});
                $slideElement.find('.car-img').css({opacity: 0, transform: 'translateX(150px)', transition: 'none'});
            },
            onSlideAfter: function($slideElement) {
                // 등장 애니메이션
                setTimeout(function() {
                    $slideElement.find('.car-title').css({
                        opacity: 1, transform: 'translateY(0)', transition: 'all 0.8s ease-out 0.1s'
                    });
                    $slideElement.find('.car-sub').css({
                        opacity: 1, transform: 'translateY(0)', transition: 'all 0.8s ease-out 0.3s'
                    });
                    $slideElement.find('.car-img').css({
                        opacity: 1, transform: 'translateX(0)', transition: 'all 1.8s cubic-bezier(0.19, 1, 0.22, 1)'
                    });
                }, 50);
            }
        });

        // 이전/다음 버튼 동작
        $('.bx-prev').click(function(){ slider.goToPrevSlide(); return false; });
        $('.bx-next').click(function(){ slider.goToNextSlide(); return false; });

        // 첫 슬라이드 강제 실행
        var $first = $('.bxslider li').not('.bx-clone').eq(0);
        setTimeout(function(){
            $first.find('.car-title').css({opacity: 1, transform: 'translateY(0)', transition: 'all 0.8s ease-out 0.1s'});
            $first.find('.car-sub').css({opacity: 1, transform: 'translateY(0)', transition: 'all 0.8s ease-out 0.3s'});
            $first.find('.car-img').css({opacity: 1, transform: 'translateX(0)', transition: 'all 1.5s ease-out'});
        }, 300);
    });
  </script>
</body>
</html>