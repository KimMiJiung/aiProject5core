<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="utf-8">
	<title>차량 상세보기</title>
	<th:block th:replace="~{top}"></th:block>
	<link th:href="@{/css/vehicle.css}" rel="stylesheet">
</head>
<body>
<div class="v-container">
	<div class="vehicleDetail">
		<div class="vehicleHeader">
		    <div class="vehicleTitle">
		        <h1>[[${vehicle.name}]]</h1>
		        <p>[[${vehicle.brand}]] · [[${vehicle.vehicleType}]] · [[${vehicle.year}]]</p>
		    </div>
		    <div class="price">KRW [[${#numbers.formatInteger(vehicle.basePrice, 3, 'COMMA')}]] ~</div>
		</div>
		
		<div class="detailSection">
		
		    <div class="imageSection">
				<div th:if="${vehicle.colors != null and !vehicle.colors.empty}">
					<img id="mainImage" th:src="@{/images/{img}(img=${vehicle.colors[0].imageColorUrl})}"/>		
				</div>
		        <div class="colorPicker">
					<div th:each="c : ${vehicle.colors}" 
					     class="colorCircle"
					     th:style="'background:' + ${c.color}"
					     th:attr="data-img=${c.imageColorUrl}">
					</div>
		        </div>
		    </div>
		
		    <div class="infoSection">
		        <table class="specTable">
					<tr><td>차종</td><td>[[${vehicle.vehicleType}]]</td></tr>
		            <tr><td>연료</td><td>[[${vehicle.fuelType}]]</td></tr>
					<tr>
						<td>배기량</td>
						<td>
							<span th:if="${vehicle.fuelType != '전기'}">[[${vehicle.displacement}]] cc</span>
							<span th:if="${vehicle.fuelType == '전기'}">[[${vehicle.displacement}]] PS</span>
						</td>
					</tr>
		            
		            <tr>
						<td>연비</td>
						<td>
							<span th:if="${vehicle.fuelType != '전기'}">[[${vehicle.fuelEfficiency}]] km/L</span>
							<span th:if="${vehicle.fuelType == '전기'}">[[${vehicle.fuelEfficiency}]] km/kWh</span>
						</td>
					</tr>
		        </table>
				<form id="trimForm" th:action="@{/vehicles/vehicle/{modelCode}/update-trim(modelCode=${vehicle.modelCode})}"
				      method="post">

				    <input type="hidden" name="id" th:value="${vehicle.id}">

				    <div class="trimSection">
				        <h4>트림 선택</h4>

				        <div class="trimBtns">
				            <label class="t-btn">
				                <input type="radio" name="trim" value="Standard"
				                       th:checked="${trim == 'Standard'}">
				                Standard
				            </label>

				            <label class="t-btn">
				                <input type="radio" name="trim" value="Exclusive"
				                       th:checked="${trim == 'Exclusive'}">
				                Exclusive
				            </label>

				            <label class="t-btn">
				                <input type="radio" name="trim" value="Prestige"
				                       th:checked="${trim == 'Prestige'}">
				                Prestige
				            </label>
				        </div>

				        <!-- 적용 버튼 오른쪽 정렬 -->
				        <div class="trimAction">
				            <button type="submit">트림 적용</button>
				        </div>
				    </div>
				</form>
				<div class="price-consult">
					<div class="priceArea">
					    KRW 
						<span id="priceText" th:data-base="${vehicle.basePrice}">
							[[${#numbers.formatInteger(vehicle.finalPrice, 3, 'COMMA')}]]
						</span>
					</div>				
					<a th:href="@{/counseling/addApply}"> <button type="button" class="consultBtn">상담 신청</button></a>
				</div>
		</div>
	</div>
	<div class="optionSection">
	    <h3>옵션</h3>

	    <div class="optionGrid">
			<!-- included 참/거짓에 따라 class에 on/off를 추가 -->
	        <div class="optionItem" 
	             th:each="o : ${optionList}"
	             th:classappend="${o.included} ? 'on' : 'off'">

	            <!-- 옵션명 -->
	            <span class="optionName">[[${o.optionName}]]</span>
	        </div>
	    </div>
	</div>
</div>
	<th:block th:replace="~{bottom}"></th:block>
	<!-- js -->
	<script th:src="@{/js/vehicle.js}"></script>
</body>

</html>