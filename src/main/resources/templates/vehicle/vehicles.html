<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="utf-8">
	<title>차량 전체보기</title>
	<th:block th:replace="~{top}"></th:block>
	<style>

		/* 전체 레이아웃 컨테이너 */
		.v-container {
			max-width: 1600px;
			margin: 40px auto;
		    display: flex;
		    gap: 44px;
		    align-items: flex-start;
		}

		/* 왼쪽 사이드바 */
		.side-box {
		    width: 180px;
		}

		.side-box {
		    margin-bottom: 38px;
		}

		.side-title {
		    font-weight: bold;
		    margin-bottom: 18px;
		}

		.side-list {
		    background: #fff;
		    padding: 16px;
		    border-radius: 10px;
		    border: 1px solid #ccc;
		}
		
		.sidebar-item {
		    display: flex;
		    align-items: center;
		    gap: 12px;
		    padding: 12px 4px;
		    color: #222;
		    cursor: pointer;
		}

		.filter-item input {
		    cursor: pointer;
		}

		/* 메인 */
		.main {
		    display: flex;
			flex-direction: column;
		}

		.price-note {
		    color: #222;
		    margin-bottom: 12px;
		}

		.grid {
		    display: grid;
		    grid-template-columns: repeat(4, 1fr);
		    gap: 28px;
		    min-height: 700px;
		}

		/* 차량 */
		.card {
		    height: 320px;
			width: 320px;
		    display: flex;
		    flex-direction: column;
		}

		.card-img {
		    background: #fff;
		    height: 190px;
		    display: flex;
		    align-items: end;
		    justify-content: center;
		}

		.card-img img {
		    max-width: 100%;
		    max-height: 160px;
		    object-fit: contain;
		}

		.card .card-body {
		    padding: 18px;
		}

		.card-title {
		    font-weight: bold;
			font-size: 17px;
		    margin-bottom: 6px;
		}
		
		.card-title a {
			text-decoration: none;
			color: #000;
		}

		.card-price {
		    color: #000;
			font-size: 17px;
		    margin-bottom: 12px;
		}

		.card-function {
		    display: flex;
		    gap: 15px;
		    font-size: 15px;
		}
		
		.card-function a {
			text-decoration: none;
			color: #444;
		}
		
		.card-function a:hover {
			font-weight: bold;
			color: #222;
		}
		
		/* 페이징 전체 위치 */
		.pagination {
		    margin-top: 40px;
		    display: flex;
		    justify-content: center;
		}
		/* 버튼 스타일 */
		.pagination ul {
		    display: flex;
		    gap: 10px;
		    list-style: none;
		    padding: 0;
		}

		.pagination a {
		    display: flex;
			align-items: center;
			justify-content: center;
		    width: 45px;
		    height: 45px;
		    border-radius: 36%;
		    border: 1px solid #ddd;
		    text-decoration: none;
		    color: #333;
		    font-weight: 600;
		    transition: .2s;
		}

		.pagination a:hover {
		    background: #222;
		    color: #fff;
		}

		.pagination a.active {
		    background: #222;
		    color: #fff;
		    border: 2px solid #000;
		    font-weight: 800;
		}

		.pagination a.arrow {
		    font-size: 16px;
		}
	</style>
</head>

<body>


    <div class="v-container">
		<form method="get" th:action="@{/vehicles}" id="sideForm">
			<div class="side-box">
			    <div class="side-title">타입</div>
			    <div class="side-list">
			        <label class="sidebar-item">
			            <input type="radio" name="type" value="" th:checked="${type == null or type == ''}"> ALL
			        </label>
			        <label class="sidebar-item">
			            <input type="radio" name="type" value="경차" th:checked="${type == '경차'}"> COMPACT
			        </label>
					<label class="sidebar-item">
					    <input type="radio" name="type" value="세단" th:checked="${type == '세단'}"> SEDAN
					</label>
			        <label class="sidebar-item">
			            <input type="radio" name="type" value="SUV" th:checked="${type == 'SUV'}"> SUV
			        </label>
			    </div>
			</div>
	
			<div class="side-box">
			    <div class="side-title">파워트레인</div>
			    <div class="side-list">
			        <label class="sidebar-item">
			            <input type="radio" name="fuel" value="" th:checked="${fuel == null or fuel == ''}"> ALL
			        </label>
			        <label class="sidebar-item">
			            <input type="radio" name="fuel" value="전기" th:checked="${fuel == '전기'}"> ELECTRIC
			        </label>
			        <label class="sidebar-item">
			            <input type="radio" name="fuel" value="휘발유" th:checked="${fuel == '휘발유'}"> GASOLINE
			        </label>
					<label class="sidebar-item">
			            <input type="radio" name="fuel" value="경유" th:checked="${fuel == '경유'}"> DIESEL
			        </label>
			    </div>
			</div>
		</form>
        
		<main class="main">
            <div class="price-note">KRW 가격은 예시이며, 차량별 기본가를 표시합니다.</div>

            <div class="grid">
				
				<!-- 차량 리스트 반복 -->
				<!-- 차량 이미지와 차량 이름 클릭하여 차량 상세보기 이동 -->
				<div class="card" th:each="v : ${vehicleList}">
					<a th:href="@{|/vehicles/vehicle/${v.modelCode}|}">
						<div class="card-img">
					        <img th:src="@{|/images/${v.fileName}|}">
					    </div>
					</a>
				    
					<div class="card-body">
				        <div class="card-title">
							<a th:href="@{|/vehicles/vehicle/${v.modelCode}|}" th:text="${v.name}"></a>
						</div>
				        
				        <div class="card-price">
				            KRW <span th:text="${#numbers.formatInteger(v.basePrice, 3, 'COMMA')}"></span> ~
				        </div>

				        <div class="card-function">
				            <a th:href="@{|/vehicles/vehicle/${v.modelCode}|}">모델 보기</a> ·
				            <a href="#">시승 신청</a>
				        </div>
				    </div>
				</div>
            </div>
			<nav class="pagination">
			    <ul>
			        <li th:if="${paging.hasPrevious()}">
			            <a th:href="@{/vehicles(page=${paging.number - 1}, type=${type}, fuel=${fuel})}" class="arrow">이전</a>
			        </li>

					<li th:each="i : ${#numbers.sequence(paging.number - 2, paging.number + 2)}"
					    th:if="${i >= 0 and i < paging.totalPages}">
						<a th:href="@{/vehicles(page=${i}, type=${#strings.isEmpty(type) ? null : type}, fuel=${#strings.isEmpty(fuel) ? null : fuel})}"
						   th:text="${i + 1}"
						   th:classappend="${paging.number == i} ? 'active'">
						</a>
					</li>

			        <li th:if="${paging.hasNext()}">
			            <a th:href="@{/vehicles(page=${paging.number + 1}, type=${type}, fuel=${fuel})}" class="arrow">다음</a>
			        </li>
			    </ul>
			</nav>
        </main>

    </div>
	<th:block th:replace="~{bottom}"></th:block>
	<!-- js -->
	<script th:src="@{/js/vehicles.js}"></script>
</body>

</html>




